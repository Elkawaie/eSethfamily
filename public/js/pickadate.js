!function(e){"function"==typeof define&&define.amd?define("picker",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):"object"==typeof window?window.Picker=e(jQuery):this.Picker=e(jQuery)}(function(h){var n=h(window),g=h(document),r=h(document.documentElement),v=null!=document.documentElement.style.transition;function b(r,e,t,i){if(!r)return b;var n=!1,s={id:r.id||"P"+Math.abs(~~(Math.random()*new Date)),handlingOpen:!1},l=t?h.extend(!0,{},t.defaults,i):i||{},o=h.extend({},b.klasses(),l.klass),c=h(r),a=function(){return this.start()},u=a.prototype={constructor:a,$node:c,start:function(){return s&&s.start?u:(s.methods={},s.start=!0,s.open=!1,s.type=r.type,r.autofocus=r==w(),r.readOnly=!l.editable,l.id=r.id=r.id||s.id,"text"!=r.type&&(r.type="text"),u.component=new t(u,l),u.$root=h('<div class="'+o.picker+'" id="'+r.id+'_root" />'),_(u.$root[0],"hidden",!0),u.$holder=h(d()).appendTo(u.$root),p(),l.formatSubmit&&function(){var e;!0===l.hiddenName?(e=r.name,r.name=""):e=(e=["string"==typeof l.hiddenPrefix?l.hiddenPrefix:"","string"==typeof l.hiddenSuffix?l.hiddenSuffix:"_submit"])[0]+r.name+e[1];u._hidden=h('<input type=hidden name="'+e+'"'+(c.data("value")||r.value?' value="'+u.get("select",l.formatSubmit)+'"':"")+">")[0],c.on("change."+s.id,function(){u._hidden.value=r.value?u.get("select",l.formatSubmit):""})}(),function(){c.data(e,u).addClass(o.input).val(c.data("value")?u.get("select",l.format):r.value).on("focus."+s.id+" click."+s.id,function(e){e.preventDefault(),u.open()}).on("mousedown",function(){s.handlingOpen=!0;var e=function(){setTimeout(function(){h(document).off("mouseup",e),s.handlingOpen=!1},0)};h(document).on("mouseup",e)}),l.editable||c.on("keydown."+s.id,m);_(r,{haspopup:!0,readonly:!1,owns:r.id+"_root"})}(),l.containerHidden?h(l.containerHidden).append(u._hidden):c.after(u._hidden),l.container?h(l.container).append(u.$root):c.after(u.$root),u.on({start:u.component.onStart,render:u.component.onRender,stop:u.component.onStop,open:u.component.onOpen,close:u.component.onClose,set:u.component.onSet}).on({start:l.onStart,render:l.onRender,stop:l.onStop,open:l.onOpen,close:l.onClose,set:l.onSet}),n=function(e){var t,i="position";e.currentStyle?t=e.currentStyle[i]:window.getComputedStyle&&(t=getComputedStyle(e)[i]);return"fixed"==t}(u.$holder[0]),r.autofocus&&u.open(),u.trigger("start").trigger("render"))},render:function(e){return e?(u.$holder=h(d()),p(),u.$root.html(u.$holder)):u.$root.find("."+o.box).html(u.component.nodes(s.open)),u.trigger("render")},stop:function(){return s.start&&(u.close(),u._hidden&&u._hidden.parentNode.removeChild(u._hidden),u.$root.remove(),c.removeClass(o.input).removeData(e),setTimeout(function(){c.off("."+s.id)},0),r.type=s.type,r.readOnly=!1,u.trigger("stop"),s.methods={},s.start=!1),u},open:function(e){return s.open?u:(c.addClass(o.active),setTimeout(function(){u.$root.addClass(o.opened),_(u.$root[0],"hidden",!1)},0),!1!==e&&(s.open=!0,n&&h("body").css("overflow","hidden").css("padding-right","+="+y()),n&&v?u.$holder.find("."+o.frame).one("transitionend",function(){u.$holder.eq(0).focus()}):setTimeout(function(){u.$holder.eq(0).focus()},0),g.on("click."+s.id+" focusin."+s.id,function(e){if(!s.handlingOpen){var t=k(e,r);e.isSimulated||t==r||t==document||3==e.which||u.close(t===u.$holder[0])}}).on("keydown."+s.id,function(e){var t=e.keyCode,i=u.component.key[t],n=k(e,r);27==t?u.close(!0):n!=u.$holder[0]||!i&&13!=t?h.contains(u.$root[0],n)&&13==t&&(e.preventDefault(),n.click()):(e.preventDefault(),i?b._.trigger(u.component.key.go,u,[b._.trigger(i)]):u.$root.find("."+o.highlighted).hasClass(o.disabled)||(u.set("select",u.component.item.highlight),l.closeOnSelect&&u.close(!0)))})),u.trigger("open"))},close:function(e){return e&&(l.editable?r.focus():(u.$holder.off("focus.toOpen").focus(),setTimeout(function(){u.$holder.on("focus.toOpen",f)},0))),c.removeClass(o.active),setTimeout(function(){u.$root.removeClass(o.opened+" "+o.focused),_(u.$root[0],"hidden",!0)},0),s.open?(s.open=!1,n&&h("body").css("overflow","").css("padding-right","-="+y()),g.off("."+s.id),u.trigger("close")):u},clear:function(e){return u.set("clear",null,e)},set:function(e,t,i){var n,r,o=h.isPlainObject(e),a=o?e:{};if(i=o&&h.isPlainObject(t)?t:i||{},e){for(n in o||(a[e]=t),a)r=a[n],n in u.component.item&&(void 0===r&&(r=null),u.component.set(n,r,i)),"select"!=n&&"clear"!=n||!l.updateInput||c.val("clear"==n?"":u.get(n,l.format)).trigger("change");u.render()}return i.muted?u:u.trigger("set",a)},get:function(e,t){if(null!=s[e=e||"value"])return s[e];if("valueSubmit"==e){if(u._hidden)return u._hidden.value;e="value"}if("value"==e)return r.value;if(e in u.component.item){if("string"!=typeof t)return u.component.get(e);var i=u.component.get(e);return i?b._.trigger(u.component.formats.toString,u.component,[t,i]):""}},on:function(e,t,i){var n,r,o=h.isPlainObject(e),a=o?e:{};if(e)for(n in o||(a[e]=t),a)r=a[n],i&&(n="_"+n),s.methods[n]=s.methods[n]||[],s.methods[n].push(r);return u},off:function(){var e,t,i=arguments;for(e=0,namesCount=i.length;e<namesCount;e+=1)(t=i[e])in s.methods&&delete s.methods[t];return u},trigger:function(e,i){var t=function(e){var t=s.methods[e];t&&t.map(function(e){b._.trigger(e,u,[i])})};return t("_"+e),t(e),u}};function d(){return b._.node("div",b._.node("div",b._.node("div",b._.node("div",u.component.nodes(s.open),o.box),o.wrap),o.frame),o.holder,'tabindex="-1"')}function p(){u.$holder.on({keydown:m,"focus.toOpen":f,blur:function(){c.removeClass(o.target)},focusin:function(e){u.$root.removeClass(o.focused),e.stopPropagation()},"mousedown click":function(e){var t=k(e,r);t!=u.$holder[0]&&(e.stopPropagation(),"mousedown"!=e.type||h(t).is("input, select, textarea, button, option")||(e.preventDefault(),u.$holder.eq(0).focus()))}}).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var e=h(this),t=e.data(),i=e.hasClass(o.navDisabled)||e.hasClass(o.disabled),n=w();n=n&&(n.type||n.href?n:null),(i||n&&!h.contains(u.$root[0],n))&&u.$holder.eq(0).focus(),!i&&t.nav?u.set("highlight",u.component.item.highlight,{nav:t.nav}):!i&&"pick"in t?(u.set("select",t.pick),l.closeOnSelect&&u.close(!0)):t.clear?(u.clear(),l.closeOnClear&&u.close(!0)):t.close&&u.close(!0)})}function f(e){e.stopPropagation(),c.addClass(o.target),u.$root.addClass(o.focused),u.open()}function m(e){var t=e.keyCode,i=/^(8|46)$/.test(t);if(27==t)return u.close(!0),!1;(32==t||i||!s.open&&u.component.key[t])&&(e.preventDefault(),e.stopPropagation(),i?u.clear().close():u.open())}return new a}function y(){if(r.height()<=n.height())return 0;var e=h('<div style="visibility:hidden;width:100px" />').appendTo("body"),t=e[0].offsetWidth;e.css("overflow","scroll");var i=h('<div style="width:100%" />').appendTo(e)[0].offsetWidth;return e.remove(),t-i}function k(e,t){var i=[];return e.path&&(i=e.path),e.originalEvent&&e.originalEvent.path&&(i=e.originalEvent.path),i&&0<i.length?t&&0<=i.indexOf(t)?t:i[0]:e.target}function _(e,t,i){if(h.isPlainObject(t))for(var n in t)o(e,n,t[n]);else o(e,t,i)}function o(e,t,i){e.setAttribute(("role"==t?"":"aria-")+t,i)}function w(){try{return document.activeElement}catch(e){}}return b.klasses=function(e){return{picker:e=e||"picker",opened:e+"--opened",focused:e+"--focused",input:e+"__input",active:e+"__input--active",target:e+"__input--target",holder:e+"__holder",frame:e+"__frame",wrap:e+"__wrap",box:e+"__box"}},b._={group:function(e){for(var t,i="",n=b._.trigger(e.min,e);n<=b._.trigger(e.max,e,[n]);n+=e.i)t=b._.trigger(e.item,e,[n]),i+=b._.node(e.node,t[0],t[1],t[2]);return i},node:function(e,t,i,n){return t?"<"+e+(i=i?' class="'+i+'"':"")+(n=n?" "+n:"")+">"+(t=h.isArray(t)?t.join(""):t)+"</"+e+">":""},lead:function(e){return(e<10?"0":"")+e},trigger:function(e,t,i){return"function"==typeof e?e.apply(t,i||[]):e},digits:function(e){return/\d/.test(e[1])?2:1},isDate:function(e){return-1<{}.toString.call(e).indexOf("Date")&&this.isInteger(e.getDate())},isInteger:function(e){return-1<{}.toString.call(e).indexOf("Number")&&e%1==0},ariaAttr:function(e,t){h.isPlainObject(e)||(e={attribute:t});for(var i in t="",e){var n=("role"==i?"":"aria-")+i,r=e[i];t+=null==r?"":n+'="'+e[i]+'"'}return t}},b.extend=function(n,r){h.fn[n]=function(e,t){var i=this.data(n);return"picker"==e?i:i&&"string"==typeof e?b._.trigger(i[e],i,[t]):this.each(function(){h(this).data(n)||new b(this,n,r,e)})},h.fn[n].defaults=r.defaults},b}),function(e){"function"==typeof define&&define.amd?define(["./picker","jquery"],e):"object"==typeof exports?module.exports=e(require("./picker.js"),require("jquery")):e(Picker,jQuery)}(function(e,l){var t,r=1440,f=e._;function i(r,o){var e,t=this,i=r.$node[0].value,n=r.$node.data("value"),a=n||i,s=n?o.formatSubmit:o.format;t.settings=o,t.$node=r.$node,t.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"},t.item={},t.item.clear=null,t.item.interval=o.interval||30,t.item.disable=(o.disable||[]).slice(0),t.item.enable=-(!0===(e=t.item.disable)[0]?e.shift():-1),t.set("min",o.min).set("max",o.max).set("now"),a?t.set("select",a,{format:s}):t.set("select",null).set("highlight",t.item.now),t.key={40:1,38:-1,39:1,37:-1,go:function(e){t.set("highlight",t.item.highlight.pick+e*t.item.interval,{interval:e*t.item.interval}),this.render()}},r.on("render",function(){var e=r.$root.children(),t=e.find("."+o.klass.viewset),n=function(t){return["webkit","moz","ms","o",""].map(function(e){return(e?"-"+e+"-":"")+t})},i=function(t,i){n("transform").map(function(e){t.css(e,i)}),n("transition").map(function(e){t.css(e,i)})};t.length&&(i(e,"none"),e[0].scrollTop=~~t.position().top-2*t[0].clientHeight,i(e,""))},1).on("open",function(){r.$root.find("button").attr("disabled",!1)},1).on("close",function(){r.$root.find("button").attr("disabled",!0)},1)}i.prototype.set=function(t,i,n){var r=this,e=r.item;return null===i?("clear"==t&&(t="select"),e[t]=i):(e["enable"==t?"disable":"flip"==t?"enable":t]=r.queue[t].split(" ").map(function(e){return i=r[e](t,i,n)}).pop(),"select"==t?r.set("highlight",e.select,n):"highlight"==t?r.set("view",e.highlight,n):"interval"==t?r.set("min",e.min,n).set("max",e.max,n):t.match(/^(flip|min|max|disable|enable)$/)&&(e.select&&r.disabled(e.select)&&r.set("select",i,n),e.highlight&&r.disabled(e.highlight)&&r.set("highlight",i,n),"min"==t&&r.set("max",e.max,n))),r},i.prototype.get=function(e){return this.item[e]},i.prototype.create=function(e,t,i){var n=this;return t=void 0===t?e:t,f.isDate(t)&&(t=[t.getHours(),t.getMinutes()]),l.isPlainObject(t)&&f.isInteger(t.pick)?t=t.pick:l.isArray(t)?t=60*+t[0]+ +t[1]:f.isInteger(t)||(t=n.now(e,t,i)),"max"==e&&t<n.item.min.pick&&(t+=r),"min"!=e&&"max"!=e&&(t-n.item.min.pick)%n.item.interval!=0&&(t+=n.item.interval),{hour:~~(24+(t=n.normalize(e,t,i))/60)%24,mins:(60+t%60)%60,time:(r+t)%r,pick:t%r}},i.prototype.createRange=function(e,t){var i=this,n=function(e){return!0===e||l.isArray(e)||f.isDate(e)?i.create(e):e};return f.isInteger(e)||(e=n(e)),f.isInteger(t)||(t=n(t)),f.isInteger(e)&&l.isPlainObject(t)?e=[t.hour,t.mins+e*i.settings.interval]:f.isInteger(t)&&l.isPlainObject(e)&&(t=[e.hour,e.mins+t*i.settings.interval]),{from:n(e),to:n(t)}},i.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},i.prototype.overlapRanges=function(e,t){var i=this;return e=i.createRange(e.from,e.to),t=i.createRange(t.from,t.to),i.withinRange(e,t.from)||i.withinRange(e,t.to)||i.withinRange(t,e.from)||i.withinRange(t,e.to)},i.prototype.now=function(e,t){var i,n=this.item.interval,r=new Date,o=60*r.getHours()+r.getMinutes();return o-=o%n,i=t<0&&n*t+o<=-n,o+="min"==e&&i?0:n,f.isInteger(t)&&(o+=n*(i&&"max"!=e?t+1:t)),o},i.prototype.normalize=function(e,t){var i=this.item.interval,n=this.item.min&&this.item.min.pick||0;return t-="min"==e?0:(t-n)%i},i.prototype.measure=function(e,t,i){return t||(t="min"==e?[0,0]:[23,59]),"string"==typeof t?t=this.parse(e,t):!0===t||f.isInteger(t)?t=this.now(e,t,i):l.isPlainObject(t)&&f.isInteger(t.pick)&&(t=this.normalize(e,t.pick,i)),t},i.prototype.validate=function(e,t,i){var n=this,r=i&&i.interval?i.interval:n.item.interval;return n.disabled(t)&&(t=n.shift(t,r)),t=n.scope(t),n.disabled(t)&&(t=n.shift(t,-1*r)),t},i.prototype.disabled=function(t){var i=this,e=i.item.disable.filter(function(e){return f.isInteger(e)?t.hour==e:l.isArray(e)||f.isDate(e)?t.pick==i.create(e).pick:l.isPlainObject(e)?i.withinRange(e,t):void 0});return e=e.length&&!e.filter(function(e){return l.isArray(e)&&"inverted"==e[2]||l.isPlainObject(e)&&e.inverted}).length,-1===i.item.enable?!e:e||t.pick<i.item.min.pick||t.pick>i.item.max.pick},i.prototype.shift=function(e,t){var i=this,n=i.item.min.pick,r=i.item.max.pick;for(t=t||i.item.interval;i.disabled(e)&&!((e=i.create(e.pick+=t)).pick<=n||e.pick>=r););return e},i.prototype.scope=function(e){var t=this.item.min.pick,i=this.item.max.pick;return this.create(e.pick>i?i:e.pick<t?t:e)},i.prototype.parse=function(e,r,t){var i,n,o,a,s,l=this,c={};if(!r||"string"!=typeof r)return r;for(a in t&&t.format||((t=t||{}).format=l.settings.format),l.formats.toArray(t.format).map(function(e){var t,i=l.formats[e],n=i?f.trigger(i,l,[r,c]):e.replace(/^!/,"").length;i&&(t=r.substr(0,n),c[e]=t.match(/^\d+$/)?+t:t),r=r.substr(n)}),c)s=c[a],f.isInteger(s)?a.match(/^(h|hh)$/i)?(i=s,"h"!=a&&"hh"!=a||(i%=12)):"i"==a&&(n=s):a.match(/^a$/i)&&s.match(/^p/i)&&("h"in c||"hh"in c)&&(o=!0);return 60*(o?i+12:i)+n},i.prototype.formats={h:function(e,t){return e?f.digits(e):t.hour%12||12},hh:function(e,t){return e?2:f.lead(t.hour%12||12)},H:function(e,t){return e?f.digits(e):""+t.hour%24},HH:function(e,t){return e?f.digits(e):f.lead(t.hour%24)},i:function(e,t){return e?2:f.lead(t.mins)},a:function(e,t){return e?4:t.time%r<720?"a.m.":"p.m."},A:function(e,t){return e?2:t.time%r<720?"AM":"PM"},toArray:function(e){return e.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(e,t){var i=this;return i.formats.toArray(e).map(function(e){return f.trigger(i.formats[e],i,[0,t])||e.replace(/^!/,"")}).join("")}},i.prototype.isTimeExact=function(e,t){return f.isInteger(e)&&f.isInteger(t)||"boolean"==typeof e&&"boolean"==typeof t?e===t:(f.isDate(e)||l.isArray(e))&&(f.isDate(t)||l.isArray(t))?this.create(e).pick===this.create(t).pick:!(!l.isPlainObject(e)||!l.isPlainObject(t))&&(this.isTimeExact(e.from,t.from)&&this.isTimeExact(e.to,t.to))},i.prototype.isTimeOverlap=function(e,t){return f.isInteger(e)&&(f.isDate(t)||l.isArray(t))?e===this.create(t).hour:f.isInteger(t)&&(f.isDate(e)||l.isArray(e))?t===this.create(e).hour:!(!l.isPlainObject(e)||!l.isPlainObject(t))&&this.overlapRanges(e,t)},i.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(-1==t.enable?1:-1)},i.prototype.deactivate=function(e,t){var n=this,r=n.item.disable.slice(0);return"flip"==t?n.flipEnable():!1===t?(n.flipEnable(1),r=[]):!0===t?(n.flipEnable(-1),r=[]):t.map(function(e){for(var t,i=0;i<r.length;i+=1)if(n.isTimeExact(e,r[i])){t=!0;break}t||(f.isInteger(e)||f.isDate(e)||l.isArray(e)||l.isPlainObject(e)&&e.from&&e.to)&&r.push(e)}),r},i.prototype.activate=function(e,t){var o=this,a=o.item.disable,s=a.length;return"flip"==t?o.flipEnable():!0===t?(o.flipEnable(1),a=[]):!1===t?(o.flipEnable(-1),a=[]):t.map(function(e){var t,i,n,r;for(n=0;n<s;n+=1){if(i=a[n],o.isTimeExact(i,e)){t=a[n]=null,r=!0;break}if(o.isTimeOverlap(i,e)){l.isPlainObject(e)?(e.inverted=!0,t=e):l.isArray(e)?(t=e)[2]||t.push("inverted"):f.isDate(e)&&(t=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(t)for(n=0;n<s;n+=1)if(o.isTimeExact(a[n],e)){a[n]=null;break}if(r)for(n=0;n<s;n+=1)if(o.isTimeOverlap(a[n],e)){a[n]=null;break}t&&a.push(t)}),a.filter(function(e){return null!=e})},i.prototype.i=function(e,t){return f.isInteger(t)&&0<t?t:this.item.interval},i.prototype.nodes=function(e){var s=this,l=s.settings,c=s.item.select,u=s.item.highlight,d=s.item.view,p=s.item.disable;return f.node("ul",f.group({min:s.item.min.pick,max:s.item.max.pick,i:s.item.interval,node:"li",item:function(e){var t,i=(e=s.create(e)).pick,n=c&&c.pick==i,r=u&&u.pick==i,o=p&&s.disabled(e),a=f.trigger(s.formats.toString,s,[l.format,e]);return[f.trigger(s.formats.toString,s,[f.trigger(l.formatLabel,s,[e])||l.format,e]),(t=[l.klass.listItem],n&&t.push(l.klass.selected),r&&t.push(l.klass.highlighted),d&&d.pick==i&&t.push(l.klass.viewset),o&&t.push(l.klass.disabled),t.join(" ")),"data-pick="+e.pick+" "+f.ariaAttr({role:"option",label:a,selected:!(!n||s.$node.val()!==a)||null,activedescendant:!!r||null,disabled:!!o||null})]}})+f.node("li",f.node("button",l.clear,l.klass.buttonClear,"type=button data-clear=1"+(e?"":" disabled")+" "+f.ariaAttr({controls:s.$node[0].id})),"",f.ariaAttr({role:"presentation"})),l.klass.list,f.ariaAttr({role:"listbox",controls:s.$node[0].id}))},i.defaults={clear:"Clear",format:"h:i A",interval:30,closeOnSelect:!0,closeOnClear:!0,updateInput:!0,klass:{picker:(t=e.klasses().picker)+" "+t+"--time",holder:t+"__holder",list:t+"__list",listItem:t+"__list-item",disabled:t+"__list-item--disabled",selected:t+"__list-item--selected",highlighted:t+"__list-item--highlighted",viewset:t+"__list-item--viewset",now:t+"__list-item--now",buttonClear:t+"__button--clear"}},e.extend("pickatime",i)});