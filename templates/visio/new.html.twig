{% extends 'base.html.twig' %}

{% block title %}Hello FamilleController!{% endblock %}
{% block stylesheet %}
    {{ parent() }}
    <link rel="stylesheet" href="https://weareoutman.github.io/clockpicker/dist/jquery-clockpicker.min.css" />
    <link rel="stylesheet" href="{{ asset('css/pickadate.css') }}" />


{% endblock %}
{% block body %}
    <div class="row clearfix">
        <div class="col-lg-3 col-md-12">
            <h3>Prendre Rdv</h3>
            {{ form_start(form) }}
            <div class="form-group">
                {{ form_label(form.jour) }}
                {{ form_widget(form.jour) }}
            </div>
            <div class="form-group">
                <div class="input-group mb-3">
                    {{ form_widget(form.heure) }}
                </div>
            </div>
            <button class="btn btn-success mt-5">{{ button_label|default('Ajouter') }}</button>
            {{ form_end(form) }}
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/mainscripts.bundle.js') }}"></script>
    <script src="{{ asset('js/datepicker.js') }}"></script>
    <script src="{{ asset('js/index.js') }}"></script>
    <script src="{{ asset('js/pickadate.js') }}"></script>
    <script>
        const picker = $('.timepicker')
        $(picker).click(function () {
            $('.picker--time').toggle();
        })
        $(document).on('change', '#visio_form_jour', function () {
            let $field = $(this);
            let $form = $field.closest('form' )
            let data = {}
            data[$field.attr('name')] = $field.val();

            $.post($form.attr('action'), data).then(function (data) {

            })
        })
        picker.pickatime({
            format: 'H:i',
            min: [8,0],
            max: [19,0],
            onOpen: function () {
                let picker = this;
                if(picker.get('disable').length === 0){
                    alert('Veuillez choisir au pr√©alable une date');
                    picker.set('disable', true)
                }
            }
        })


    </script>
{% endblock %}
